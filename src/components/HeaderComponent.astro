---
import HeaderLink from "./HeaderLink.astro";
import { SITE_TITLE } from "../consts";

const response = await fetch("https://co.pageover.org/api/headermenu");
const data = await response.json();

const titles = data.map((item) => item.title_1);

console.log(titles);

const path = Astro.url.pathname;
console.log(path);

let navbarBgColor;

if (path !== "/") {
  navbarBgColor = "white";
} else {
  // navbarBgColor = "rgb(245, 245, 245)";
  navbarBgColor = "white";
}

console.log(navbarBgColor);
---

<header id="header">
  <nav
    class="navbar navbar-expand-lg pt-3"
    data-bs-theme="light"
    style={`background-color: ${navbarBgColor}`}
  >
    <div class="container">
      <a
        class="navbar-brand"
        style="font-weight: 500; font-size: 120%;"
        href="/"
        >{SITE_TITLE}
        <img
          src="/logo-main.svg"
          alt="Code Ocean Logo"
          width="120"
          height="80"
        />
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <!-- style="margin: 0 auto; -->
          <li class="nav-item">
            <HeaderLink class="nav-link" href="/">Главная</HeaderLink>
          </li>
          <li class="nav-item">
            <HeaderLink class="nav-link" href="/about">О компании</HeaderLink>
          </li>
          <li class="nav-item">
            <HeaderLink class="nav-link" href="/contacts">Контакты</HeaderLink>
          </li>
        </ul>
        <ul class="me-auto mb-2 mb-lg-0">
          <li
            class="nav-item"
            style="font-weight: bolder; margin-right: 0rem; list-style: none;"
          >
            <a
              href="tel:8-800-500-20-20"
              style="color: black; text-decoration: none;">8-800-500-20-20</a
            >
          </li>
          <li
            class="nav-item"
            style="font-weight: 400; margin-right: 3rem; font-size: 90%; list-style: none;"
          >
            <HeaderLink href="mailto:hi@codeocean.ru" style="color: black;">
              hi@codeocean.ru
            </HeaderLink>
          </li>
        </ul>
        <button class="btn btn-warning btn-lg" type="submit">Связаться</button>
      </div>
    </div>
  </nav>
</header>
